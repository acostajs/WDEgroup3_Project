{% extends "layout.html" %}

{% block content %}
    <h2>Generated Schedule (From Today Onwards)</h2>

    {% if shifts %}
        {# Basic table styling added for readability #}
        <table border="1" style="border-collapse: collapse; width: 90%; margin-top: 15px;">
            <thead>
                <tr style="background-color: #f2f2f2;">
                    <th style="padding: 8px;">Date</th>
                    <th style="padding: 8px;">Start Time</th>
                    <th style="padding: 8px;">End Time</th>
                    <th style="padding: 8px;">Employee</th>
                    <th style="padding: 8px;">Position</th>
                </tr>
            </thead>
            <tbody>
                {# Loop through the shift objects passed from the route #}
                {% for shift in shifts %}
                    <tr>
                        <td style="padding: 8px;">{{ shift.start_time.strftime('%Y-%m-%d (%a)') }}</td>
                        <td style="padding: 8px;">{{ shift.start_time.strftime('%I:%M %p') }}</td> {# e.g., 09:00 AM #}
                        <td style="padding: 8px;">{{ shift.end_time.strftime('%I:%M %p') }}</td> {# e.g., 05:00 PM #}
                        <td style="padding: 8px;">{{ shift.employee.name if shift.employee else 'N/A' }}</td>
                        <td style="padding: 8px;">{{ shift.employee.position if shift.employee else 'N/A' }}</td>
                    </tr>
                {% else %}
                    {# This part inside the loop is technically not reachable if the outer 'if shifts' is true,
                       but good practice in case the loop logic changes #}
                    <tr>
                        <td colspan="5">No shifts found in the loop.</td> 
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p style="margin-top: 15px;">No shifts found in the schedule for upcoming dates.</p>
        <p>Try <a href="{{ url_for('main.generate_schedule_route') }}">generating the schedule</a> first.</p>
    {% endif %}

    <hr style="margin-top: 20px;">
    <p><a href="{{ url_for('main.index') }}">Back to Home</a></p>
    <p><a href="{{ url_for('main.generate_schedule_route') }}">Re-generate Schedule</a></p>

{% endblock %}